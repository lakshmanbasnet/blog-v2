<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta property="op:markup_version" content="v1.0"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> File Server with Onion Omega - lakshman's blog </title> <meta property="fb:app_id" content="2389938521319802"> <meta property="fb:pages" content="1785869888183710" /> <meta name="description" content="Here you will learn how to setup a file server for your network using Onion Omega a linux powered computer, samba and external storage. This server is access..."> <meta name="keywords" content="lakshman, lakshman basnet, nepal, nepali blog, nepali blogger, technology, IT"> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="File Server with Onion Omega - lakshman's blog "> <meta property="og:url" content="http://localhost:4000/iot/building-file-server-with-onion-omega-nas"> <meta property="og:image" content="http://localhost:4000//assets/omega1.jpg" /> <meta property="og:site_name" content="Lakshman's Blog"> <meta property="article:publisher" content="https://www.facebook.com/blog.lakshman" /> <meta property="article:author" content="https://www.facebook.com/100000434533671" /> <meta property="article:published_time" content="2018-01-01 00:00:00 +0000" /> <meta property="og:description" content="Here you will learn how to setup a file server for your network using Onion Omega a linux powered computer, samba and external storage. This server is accessible from different devices/OS be it mobile or desktop. Login Credentials can also be setup for different users to prevent unwanted access."> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title" content="File Server with Onion Omega"> <meta name="twitter:description" content="Here you will learn how to setup a file server for your network using Onion Omega a linux powered computer, samba and external storage. This server is accessible from different devices/OS be it mobile or desktop. Login Credentials can also be setup for different users to prevent unwanted access."> <meta name="twitter:site" content="@lakshmanbasnet" /> <meta name="twitter:creator" content="@lakshmanbasnet"> <meta name="twitter:card" content="summary"> <link rel="alternate" href="https://blog.lakshmanbasnet.com" hreflang="en" /> <link rel="canonical" href="http://localhost:4000/iot/building-file-server-with-onion-omega-nas"> <link rel="alternate" type="application/rss+xml" title="lakshman's blog" href="http://localhost:4000/feed.xml"> <noscript async> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"> <link rel="stylesheet" href="/css/main.css"> <link href='https://fonts.googleapis.com/css?family=Antic+Slab|Handlee|Julius+Sans+One|Sacramento|Amatic+SC' rel='stylesheet' type='text/css'> <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600'> <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css'> <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css"> <link rel="icon" href="/assets/favicon.ico"> <link href='https://fonts.googleapis.com/css?family=Gloria+Hallelujah' rel='stylesheet' type='text/css'> <link href="https://fonts.googleapis.com/css?family=Exo+2" rel="stylesheet"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css"> </noscript> <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script> <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script> <script src="https://apis.google.com/js/platform.js" defer=""></script> <!--<script src="/assets/youtube.js"></script>--> <script defer=""> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-80349342-3', 'auto'); ga('send', 'pageview'); </script> </head> <nav class="navbar navbar-default"><div class="wrapper"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="site-title" href="/">lakshman's blog</a> </div> <div class="collapse navbar-collapse" id="myNavbar"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Categories <span class="caret"></span></a> <ul class="dropdown-menu"> <li> <a href="/archive"><b> All</b> <span class="badge">101</span></a> </li> <li> <a href="/travel">Travel <span class="badge"> 2 </span></a> </li> <li> <a href="/technology">Technology <span class="badge"> 27 </span></a> </li> <li> <a href="/linux">Linux <span class="badge"> 6 </span></a> </li> <li> <a href="/web">Web <span class="badge"> 12 </span></a> </li> <li> <a href="/random">Random <span class="badge"> 1 </span></a> </li> <li> <a href="/jekyll">Jekyll <span class="badge"> 2 </span></a> </li> <li> <a href="/info">Info <span class="badge"> 20 </span></a> </li> <li> <a href="/knowledgeserverplus">Knowledgeserverplus <span class="badge"> 5 </span></a> </li> <li> <a href="/rhel">Rhel <span class="badge"> 9 </span></a> </li> <li> <a href="/events">Events <span class="badge"> 10 </span></a> </li> <li> <a href="/IOT">Iot <span class="badge"> 1 </span></a> </li> <li> <a href="/review">Review <span class="badge"> 4 </span></a> </li> <li> <a href="/nepal-360-photo">Nepal-360-photo <span class="badge"> 1 </span></a> </li> </ul> </li> <li><a href="https://lakshmanbasnet.com">Portfolio</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">More <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/log">Log</a></li> <li><a href="/about">About</a></li> <li><a href="https://lakshmanbasnet.com/resume">Resume</a></li> <li><a href="https://youtube.com/knowledgeserverplus">YouTube</a></li> </ul> </li> </ul> </div> </div></div> </nav> <!-- <header class="site-header navbar-fixed-top"> <div class="wrapper"> <nav class="site-nav"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="site-title" href="/">lakshman's blog</a> <ul class="nav navbar-nav navbar-right"> <li><a href="/"><i class="fa fa-home fa-2x" aria-hidden="true"></i></a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Categories <span class="caret"></span></a> <ul class="dropdown-menu"> <li> <a href="/archive"><b> All</b> <span class="badge">101</span></a> </li> <li> <a href="/travel">Travel <span class="badge"> 2 </span></a> </li> <li> <a href="/technology">Technology <span class="badge"> 27 </span></a> </li> <li> <a href="/linux">Linux <span class="badge"> 6 </span></a> </li> <li> <a href="/web">Web <span class="badge"> 12 </span></a> </li> <li> <a href="/random">Random <span class="badge"> 1 </span></a> </li> <li> <a href="/jekyll">Jekyll <span class="badge"> 2 </span></a> </li> <li> <a href="/info">Info <span class="badge"> 20 </span></a> </li> <li> <a href="/knowledgeserverplus">Knowledgeserverplus <span class="badge"> 5 </span></a> </li> <li> <a href="/rhel">Rhel <span class="badge"> 9 </span></a> </li> <li> <a href="/events">Events <span class="badge"> 10 </span></a> </li> <li> <a href="/IOT">Iot <span class="badge"> 1 </span></a> </li> <li> <a href="/review">Review <span class="badge"> 4 </span></a> </li> <li> <a href="/nepal-360-photo">Nepal-360-photo <span class="badge"> 1 </span></a> </li> </ul> </li> <li><a href="/analytics">Analytics</a></li> <li><a href="https://blog.lakshmanbasnet.com">Portfolio</a></li> <li><a href="/about">About</a></li> </ul> </nav> <script> (function() { var cx = '016590255034786883878:_w4re-fqyn4'; var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true; gcse.src = 'https://cse.google.com/cse.js?cx=' + cx; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s); })(); </script> </div> </header> --> <div class="page-content"> <script> window.fbAsyncInit = function() { FB.init({ appId : '2389938521319802', xfbml : true, version : 'v5.0' }); FB.AppEvents.logPageView(); }; (function(d, s, id){ var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) {return;} js = d.createElement(s); js.id = id; js.src = "https://connect.facebook.net/en_US/sdk.js"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk')); </script> <!-- <div id="sidebar-left" class="hidden-md visible-lg hidden-sm hidden-xs"> <div class="tag-box inline" style="margin-bottom: 15px;"> <h4><i class="fa fa-bullhorn ba" aria-hidden="true"> &nbsp; Recent Posts </i></h4> <li class="list-group-item"> <a href="/2019-02-11-queen-for-seven-days-korean-drama-review"></a></li> <li class="list-group-item"> <a href="/info/spot-fake-google-reviews">Spotting fake Google reviews the smart way</a></li> <li class="list-group-item"> <a href="/knowledgeserverplus/screen-cast-iphone-to-ipad">iPhone to iPad Screencasting</a></li> <li class="list-group-item"> <a href="/events/galkot-international-sculpture-symposium-2020">Galkot International Sculpture Symposium 2020, Nepal</a></li> <li class="list-group-item"> <a href="/review/moon-embracing-the-sun">Review - Moon Embracing The Sun</a></li> <li class="list-group-item"> <a href="/info/visit-nepal-2020">All about Visit Nepal 2020</a></li> </div> <h4><i class="fa fa-youtube-play ba" aria-hidden="true">&nbsp;Knowledge Server Plus</i> </h4> YouTube videos on Technology, How to, Tutorials and Concepts by lakshman <br> <div class="g-ytsubscribe" data-channelid="UC3cOZUVV5FZ5v3niIgSukMw" data-layout="full" data-count="default"></div> --> <!-- <li class="list-group-item"> <div class="youtube lazyload" data-embed="GAPSL6orbjg"> <div class="play-button"></div></div> <a href="https://youtu.be/GAPSL6orbjg" target="blank">Onion Omega 2 First Setup Tutorial | IOT</a> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="pBMYyCqkY_g"> <div class="play-button"></div></div> <a href="https://youtu.be/pBMYyCqkY_g" target="blank">Why do some rich people shoplift?</a> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="xHOX3TB1VHg"> <div class="play-button"></div></div> <a href="https://youtu.be/xHOX3TB1VHg" target="blank">Using Samsung Gear 360 with iPhone - Connect, Control & Use Gear360 from iOS</a> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="_tzkF68ZjVE"> <div class="play-button"></div></div> <a href="https://youtu.be/_tzkF68ZjVE" target="blank">Adding Custom Domain Name to Heroku app 2018</a> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="9_Wt0egJ-NA"> <div class="play-button"></div></div> <a href="https://youtu.be/pBMYyCqkY_g" target="blank">Github Student Developer Pack</a> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="fGL7QskmXZA"> <div class="play-button"></div></div> <a href="https://youtu.be/fGL7QskmXZA" target="blank">Creating your IGTV Channel</a> </li> <hr> <h4><i class="fa fa-facebook ba" aria-hidden="true">&nbsp;Galkot</i> </h4> I often post on this page to promote my hometown around the world. <div class="fb-page lazyload" data-href="https://www.facebook.com/golkot" data-tabs="timeline" data-width="260" data-small-header="false" data-adapt-container-width="true" data-hide-cover="true" data-show-facepile="true"><blockquote cite="https://www.facebook.com/golkot" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/golkot">Galkot</a></blockquote></div> --> <!-- </div> --> <!-- category for bigger screens --> <div id="sidebar" class="hidden-md visible-lg hidden-sm hidden-xs"> <!-- <div class="tag-box inline"> <h4><i class="fa fa-object-group ba" aria-hidden="true">&nbsp; &nbsp;Categories </i></h4> <li class="list-group-item"> <a href="/archive"><b> All</b> <span class="badge">101</span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/travel">Travel <span class="badge"> 2 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/technology">Technology <span class="badge"> 27 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/linux">Linux <span class="badge"> 6 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/web">Web <span class="badge"> 12 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/random">Random <span class="badge"> 1 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/jekyll">Jekyll <span class="badge"> 2 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/info">Info <span class="badge"> 20 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/knowledgeserverplus">Knowledgeserverplus <span class="badge"> 5 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/rhel">Rhel <span class="badge"> 9 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/events">Events <span class="badge"> 10 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/IOT">Iot <span class="badge"> 1 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/review">Review <span class="badge"> 4 </span></a> </li> <li class="list-group-item s"> &raquo; &nbsp;<a href="/nepal-360-photo">Nepal-360-photo <span class="badge"> 1 </span></a> </li> </div> <h4><i class="fa fa-youtube-play ba" aria-hidden="true">&nbsp;Nepali Doko</i> </h4> Nepali Videos on Life, Travel and misc by lakshman <br> <div class="g-ytsubscribe" data-channelid="UCXTCCxpzilF0TO5c9TM86Gg" data-layout="full" data-count="default"></div> <!-- <li class="list-group-item"> <div class="youtube lazyload" data-embed="LxkWln6wX3I"> <div class="play-button"></div></div> <a href="https://youtu.be/LxkWln6wX3I" target="blank">यसरी बनाउदैछ चाइनाले कोटेश्वर-कलन्की सडक ८ लेन</a> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="1cStUjjGXOs"> <div class="play-button"></div></div> <h5><a href="https://youtu.be/1cStUjjGXOs" target="blank">Nepali Panche Baja | नेपाली पन्चेबाजा</a></h5> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="s8fyFTsdJpo"> <div class="play-button"></div></div> <h5><a href="https://youtu.be/s8fyFTsdJpo" target="blank">Dog vs Monkey Fight I | Live Caught in Camera | Bajrayogini Temple Saankhu #5</a></h5> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="SfFqBniPqUU"> <div class="play-button"></div></div> <h5><a href="https://youtu.be/s8fyFTsdJpo" target="blank">Children swimming in Bagmati river at Pashupatinath</a></h5> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="s_Yo8_6CjSU"> <div class="play-button"></div> </div> <h5><a href="https://youtu.be/s8fyFTsdJpo" target="blank">ज्यानमारा टिपरमाथि आक्रोशित प्रत्यक्षदर्शीद्वारा आगजनी - स्कूटीमा सवार एकको टिपरले किचेर मृत्यु</a></h5> </li> <li class="list-group-item"> <div class="youtube lazyload" data-embed="9585h0VPGpY"> <div class="play-button"></div></div> <h5> <a href="https://youtu.be/s8fyFTsdJpo" target="blank">Snowfall in Kalinchowk, Dolakha</a></h5> </li> --> </div> <div class="wrapper"> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-80349342-3', 'auto'); ga('send', 'pageview'); </script> <div id="fb-root"></div> <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v6.0&appId=2389938521319802&autoLogAppEvents=1"></script> <a name=post-top></a> <header class="post-header"> <h1 class="post-title" itemprop="name headline">File Server with Onion Omega</h1> <p class="post-meta"><i class="fa fa-calendar" aria-hidden="true"></i> <time datetime="2018-01-01T00:00:00+00:00" itemprop="datePublished">Jan 1, 2018</time> &nbsp;&nbsp; <span itemprop="name"><i class="fa fa-folder-open-o" aria-hidden="true"></i> IOT</span> &nbsp;&nbsp;<i class="fa fa-clock-o" aria-hidden="true"></i> 6 min read </header> <div class="fb-like" data-href class="post-link" href="" data-width="300px" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true" > </div> <div class="post-content" itemprop="articleBody"> <br> <p>Here you will learn how to setup a file server for your network using Onion Omega a linux powered computer, samba and external storage. This server is accessible from different devices/OS be it mobile or desktop. Login Credentials can also be setup for different users to prevent unwanted access.</p> <p><img src="/assets/omega1.jpg" alt="onion omega project file server" style="max-height: 400px; width: 720px;" /><br /> This is just a quick note, that I have prepared after I successfully configured the Omega Server with Onion Omega 2+, Samba Server, External USB Storage. I will make this more informative with time.</p> <p>Before we begin, let us know what things I used: <br /></p> <h2 id="essentials">Essentials</h2> <ul> <li>Onion Omega 2+</li> <li>Expansion dock for powering up, and USB connection</li> <li>USB pen drive (you can use sd card too :) )</li> <li>wifi connection</li> </ul> <p><br /></p> <p>Okay, let us start now!</p> <h2 id="1-wifi-setup">1. wifi setup</h2> <p>If you haven’t already connected your omega to your wifi network, you can do it through console’s GUI at <code class="highlighter-rouge">http:192.168.3.1</code> or through command with CLI interface:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@Omega-EEB7:~# wifisetup
</code></pre></div></div> <p>You will get output like:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Onion Omega Wifi Setup

Select from the following:
1) Scan for Wifi networks
2) Type network info
q) Exit

Selection: 1
</code></pre></div></div> <p>Upon doing this you will be guided on screen, it will be done in few seconds.</p> <p>remember to do this you need to power up your Omega first and get connected to its wifi. If you want to know more please check onion’s documentation here on …</p> <p><br /></p> <h2 id="2-setting-up-external-storage">2. Setting up External Storage</h2> <p>Before we plugin external USB storage, or sd card lets check the output of:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls /tmp/mounts
</code></pre></div></div> <p>You might get empty since there is no any storage attached. If we redo after attaching USB device or sd card:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@Omega-EEB7:~# ls /tmp/mounts
USB-A1
</code></pre></div></div> <p>Here in USB-A1 is shown as output as our storage device has been detected.</p> <p>Now lets proceed further..</p> <p><br /></p> <h2 id="3-samba-software-installation-on-onion-omega">3. Samba Software Installation on Onion Omega</h2> <p>In this tutorial, we be using samba server to setup our file server. Lets download them with following commands:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>opkg update
</code></pre></div></div> <p>to update the installed packages</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>opkg list | grep samba
</code></pre></div></div> <p>to list the available software <code class="highlighter-rouge">samba</code> packages with their version.</p> <p>in my case output was:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>samba36-client - 3.6.25-6 - Samba 3.6 SMB/CIFS client
samba36-server - 3.6.25-6 - The Samba software suite is a collection of programs that implements the SMB protocol for UNIX systems, allowing you to serve files and printers to Windows, NT, OS/2 and DOS clients. This protocol is sometimes also referred to as the LanManager or Netbios protocol.
</code></pre></div></div> <p>Lets install the <code class="highlighter-rouge">samba##-server</code> package with the samba version available</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>opkg install samba36-server
</code></pre></div></div> <p><br /></p> <h2 id="4-configuring-samba">4. Configuring Samba</h2> <p>So, we have installed samba into our omega. But it needs to get configured properly to make it work.</p> <p>We need to edit few things here in two files:</p> <p>i. /etc/config/samba</p> <p>ii. in /etc/samba/smb.conf.template</p> <p>here we go, ii. /etc/config/samba</p> <p>Lets open open the samba file in vim</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /etc/config/samba
</code></pre></div></div> <p>after opening, let us add some text at the bottom.</p> <p>You might get confused if you haven’t used vim editor before. After opening the file just press <code class="highlighter-rouge">i</code> key to insert or goto edit mode.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>option 'interface' 'apcli0'
</code></pre></div></div> <p>Here, <code class="highlighter-rouge">apcli0</code> is the wifi interface of our Onion Omega. We are instructing samba to listen to this interface for communication.</p> <p>You can give your server a good name in <code class="highlighter-rouge">name field</code> in my case, I would give <code class="highlighter-rouge">omega_server</code></p> <p>In <code class="highlighter-rouge">description</code>, you can add descriptive text about the server. And leave rest as it is.</p> <p>Now, to share a folder/directory, let us add following chunk of codes at the bottom of our samba file:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config 'sambashare'
    option 'name'                   'serve'
    option 'path'                   '/tmp/mounts/USB-A1'
    option 'users'                  'root'
    option 'read_ only'             'no'
    option 'guest_ok'               'no'
    option 'writeable'              'yes'
    option 'browseable'             'yes'
    option 'create_mask"            '0644'
    option ' directory_mask'        '0755'
    option 'force_user'             'root'
</code></pre></div></div> <p>You can give any good name to <code class="highlighter-rouge">sambashare</code> .</p> <p><code class="highlighter-rouge">name</code> is the folder that will appear in network, you can give any name</p> <p><code class="highlighter-rouge">path</code> is the path to share, here path to our usb storage</p> <p><code class="highlighter-rouge">users</code> here we are defining users so that only with valid login credentials can access our server. In our case, <code class="highlighter-rouge">root</code> is the username.</p> <p><code class="highlighter-rouge">read_only</code> defines if it is just read only</p> <p><code class="highlighter-rouge">guest_ok</code> : Guest can access or not</p> <p><code class="highlighter-rouge">writeable</code> : if the user has write access</p> <p>.. likewise :D</p> <p>now, this is how my final file looks like:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config samba
    option 'name'                   'omega_server'
    option 'workgroup'              'WORKGROUP'
    option 'description'            'Omega Server'
    option 'homes'                  '1'
    option 'interface'              'apcli0'
config 'sambashare'
    option 'name'                   'serve'
    option 'path'                   '/tmp/mounts/USB-A1'
    option 'users'                  'root'
    option 'read_ only'             'no'
    option 'guest_ok'               'no'
    option 'writeable'              'yes'
    option 'browseable'             'yes'
    option 'create_mask"            '0644'
    option ' directory_mask'        '0755'
    option 'force_user'             'root'
~
~
</code></pre></div></div> <p>To save the file first pess <code class="highlighter-rouge">Esc</code> key, then pressing <code class="highlighter-rouge">Shift+O</code> would generate <code class="highlighter-rouge">:</code> at the bottom of your screen then press <code class="highlighter-rouge">wq</code> , w is for write and q for quit.</p> <p><br /> ii. in /etc/samba/smb.conf.template</p> <p>here lets change the value of <code class="highlighter-rouge">invalid users</code> as</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>invalid users = #
</code></pre></div></div> <p>save it!</p> <p><br /></p> <h2 id="5-login-credentials-for-users">5. Login Credentials for Users</h2> <p>We have added root user in our samba setting but haven’t setup any passwords for security.</p> <p>To setup password samba has <code class="highlighter-rouge">smbpasswd</code></p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>smbpasswd -a root
</code></pre></div></div> <p>now, we can setup the password.</p> <p><br /></p> <h2 id="6-making-the-omega-server-live">6. Making the Omega Server live</h2> <p>Since, we have made some changes in samba configuration file, lets restart our samba server with</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/etc/init.d/samba restart
</code></pre></div></div> <p>Some useful samba commands that might be useful:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Syntax: /etc/init.d/samba [command]

Available commands:
    start   Start the service
    stop    Stop the service
    restart Restart the service
    reload  Reload configuration files (or restart if that fails)
    enable  Enable service autostart
    disable Disable service autostart
</code></pre></div></div> <p><br /></p> <p>Our server is live now and ready to get explored.</p> <h2 id="7-accessing-the-omega-server">7. Accessing the Omega Server</h2> <p><img src="/assets/omega2.jpg" alt="onion omega project network file server IOT" style="max-height: 400px;" /><br /></p> <p>Accessing the server is pretty easy from any devices from any operating system</p> <ol> <li> <p>Linux In linux, open the Netowork section in file explorer where you can get different networks. If it isn’t listed there you can choose the option <strong>connect to server</strong> and give the address as <code class="highlighter-rouge">smb://omega-####.local</code> replace ### with last four digit of your omega’s MAC address</p> </li> <li> <p>Windows Open file explorer, and goto network, if you don’t see in network, go back and click on map network drive and give the address manually</p> </li> <li> <p>Mobile Download ES file explorer or similar apps, and goto network section, you can add the server address, when you are logged in you can access the server and read/write to it.</p> </li> </ol> <p><br /></p> <p>Hope you were able to make it, I will be making a video on this soon to ease your process, and making this tutorial post more descriptive.</p> <p>Have a great time!</p> <!--<div class="fb-like" data-href class="post-link" href="" data-width="300px" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true" > </div>--> <br><br> Was this article helpful? Help me grow! <i class="fa fa-arrow-down" aria-hidden="true"></i> <hr> <div class="row"> <div class="col-md-6"> <i class="fa fa-heart-o" aria-hidden="true"></i> Stay connected<br> <div class="fb-page" data-href="https://www.facebook.com/bloglakshman/" data-tabs="" data-width="" data-height="" data-small-header="true" data-adapt-container-width="true" data-hide-cover="true" data-show-facepile="true"><blockquote cite="https://www.facebook.com/bloglakshman/" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/bloglakshman/">lakshman's blog</a></blockquote></div> </div> <div class="col-md-6"> <i class="fa fa-heart" aria-hidden="true"></i> <a href="http://bit.ly/2TLEd2r" target="blank">Subscribe us on YouTube</a><br> <div class="g-ytsubscribe" data-channelid="UCypRgfO6Hh1tnb_G6qArm7A" data-layout="full" data-theme="default" data-count="default"></div> </div> </div> <br> <div id="disqus_thread"></div> <br> <hr> <h2 align="middle"> Posts you might like </h2><br> </div> </article> <br><br> </div> </div> <footer class="site-footer"> <!-- Default Statcounter code for lakshman's blog http://blog.lakshmanbasnet.com --> <script type="text/javascript"> var sc_project=11764086; var sc_invisible=0; var sc_security="2c22192c"; var scJsHost = (("https:" == document.location.protocol) ? "https://secure." : "http://www."); document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+ "statcounter.com/counter/counter.js'></"+"script>"); </script> <noscript><div class="statcounter"><img class="statcounter" src="//c.statcounter.com/11764086/0/2c22192c/0/" alt="Web Analytics"></a></div></noscript> <div style="text-align: center;"> <small><i>hits since 17 July 2018</i></small> </div> <!-- End of Statcounter Code --> <div class="footer-col-wrapper contact-list"> <div class="footer-col footer-col-1"> <li><a href="/about" target="blank"><h4>About</h4></a> <li><a href="https://lakshmanbasnet.com" target="blank"><h4>Portfolio</h4></a></li> <li><a href="/archive" target="blank"><h4>Archive</h4></a></li> <li><a href="mailto:lakshmanbasnet@gmail.com" target="blank"><h4>Contact</h4></a></li> <br> <li><a href="/donate" target="blank"><h4>Contribute</h4></a></li> </div> <div class="footer-col footer-col-2"> <li><a href="https://www.youtube.com/Knowledgeserverplus" target="blank"><i class="fa fa-youtube" aria-hidden="true">&nbsp;Knowledge Server Plus</i></a></li> </div> <div class="footer-col footer-col-2"> <li><a href="https://www.instagram.com/_galkot" target="blank"><i class="fa fa-instagram" aria-hidden="true">&nbsp;Galkot</i></a></li> <li><a href="https://www.instagram.com/nep.aligram" target="blank"><i class="fa fa-instagram" aria-hidden="true">&nbsp;nep.aligram</i></a></li> </div> <div class="footer-col footer-col-2"> <li><a href="https://www.facebook.com/golkot" target="blank"><i class="fa fa-facebook" aria-hidden="true">&nbsp;Galkot</i></a></li> <li><a href="https://www.facebook.com/Knowledgeserverplus" target="blank"><i class="fa fa-facebook" aria-hidden="true">&nbsp;Knowledge Server Plus</i></a></li> </div> </div> </div> <div class="wrapper2 contact-list"> <div class="footer-col footer-col-1"> <a href="https://blog.lakshmanbasnet.com/"> Privacy Policy</a> &nbsp; <a href="https://blog.lakshmanbasnet.com/">Disclaimer</a> </div> <div class="footer-col footer-col-2"> Proudly powered by <a href="https://www.jekyllrb.com" target="blank">Jekyll</a> & <a href="https://www.github.com" target="blank">Github</a> </div> <div class="footer-col footer-col-3"> © <a href="http://lakshmanbasnet.com" target="blank">lakshman</a> 2016 - 2020 </div> </div> </footer> <script> /* second CSS File */ var giftofspeed0 = document.createElement('link'); giftofspeed0.rel = 'stylesheet'; giftofspeed0.href = 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'; giftofspeed0.type = 'text/css'; var godefer0 = document.getElementsByTagName('link')[0]; godefer0.parentNode.insertBefore(giftofspeed0, godefer0); </script> <script> /* third CSS File */ var giftofspeed3 = document.createElement('link'); giftofspeed3.rel = 'stylesheet'; giftofspeed3.href = '/css/main.css'; giftofspeed3.type = 'text/css'; var godefer3 = document.getElementsByTagName('link')[0]; godefer3.parentNode.insertBefore(giftofspeed3, godefer3); </script> <script> /* fourth CSS File */ var giftofspeed4 = document.createElement('link'); giftofspeed4.rel = 'stylesheet'; giftofspeed4.href = 'https://fonts.googleapis.com/css?family=Antic+Slab|Handlee|Julius+Sans+One|Sacramento|Amatic+SC'; giftofspeed4.type = 'text/css'; var godefer4 = document.getElementsByTagName('link')[0]; godefer4.parentNode.insertBefore(giftofspeed4, godefer4); </script> <script> /* fifth CSS File */ var giftofspeed5 = document.createElement('link'); giftofspeed5.rel = 'stylesheet'; giftofspeed5.href = 'https://fonts.googleapis.com/css?family=Open+Sans:300,400,600'; giftofspeed5.type = 'text/css'; var godefer5 = document.getElementsByTagName('link')[0]; godefer5.parentNode.insertBefore(giftofspeed5, godefer5); </script> <script> /* sixth CSS File */ var giftofspeed6 = document.createElement('link'); giftofspeed6.rel = 'stylesheet'; giftofspeed6.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css'; giftofspeed6.type = 'text/css'; var godefer6 = document.getElementsByTagName('link')[0]; godefer6.parentNode.insertBefore(giftofspeed6, godefer6); </script> <script> /* sixth CSS File */ var giftofspeed7 = document.createElement('link'); giftofspeed7.rel = 'stylesheet'; giftofspeed7.href = 'https://cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.css'; giftofspeed7.type = 'text/css'; var godefer7 = document.getElementsByTagName('link')[0]; godefer6.parentNode.insertBefore(giftofspeed7, godefer7); </script> <script> /* sixth CSS File */ var giftofspeed8 = document.createElement('link'); giftofspeed8.rel = 'icon'; giftofspeed8.href = '/assets/favicon.ico'; giftofspeed8.type = 'icon'; var godefer8 = document.getElementsByTagName('link')[0]; godefer8.parentNode.insertBefore(giftofspeed8, godefer8); </script> <script> /* sixth CSS File */ var giftofspeed9 = document.createElement('link'); giftofspeed9.rel = 'stylesheet'; giftofspeed9.href = 'https://fonts.googleapis.com/css?family=Gloria+Hallelujah'; giftofspeed9.type = 'text/css'; var godefer9 = document.getElementsByTagName('link')[0]; godefer9.parentNode.insertBefore(giftofspeed9, godefer9); </script> <script> /* sixth CSS File */ var giftofspeed7 = document.createElement('link'); giftofspeed7.rel = 'stylesheet'; giftofspeed7.href = 'https://fonts.googleapis.com/css?family=Exo+2'; giftofspeed7.type = 'text/css'; var godefer7 = document.getElementsByTagName('link')[0]; godefer7.parentNode.insertBefore(giftofspeed7, godefer7); </script> <div id="fb-root"></div> <script defer="">(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7&appId=125847997953374"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script> <div id="fb-root"></div> <script defer="">(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0&appId=125847997953374&autoLogAppEvents=1'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ var disqus_config = function () { this.page.url = '/iot/building-file-server-with-onion-omega-nas'; // Replace PAGE_URL with your page's canonical URL variable this.page.identifier = '/iot/building-file-server-with-onion-omega-nas' // Replace PAGE_IDENTIFIER with your page's unique identifier variable }; (function() { // DON'T EDIT BELOW THIS LINE var d = document, s = d.createElement('script'); s.src = 'https://lakshmanblog.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <script src="https://lakshmanblog.disqus.com/embed.js" defer=""></script> <script src="/assets/lazysizes.min.js" async=""></script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" async=""></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" async=""></script> </html>